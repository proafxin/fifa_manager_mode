[tox]
envlist   = tests, pylint, isort
skipsdist = true
isolated_build = true

[isort]
profile = black
multi_line_output = 3
src_paths=manager
py_version=310
skip=.gitignore,.dockerignore,manager/migrations/*.py

[gh-actions]
python =
    3.6: py36
    3.7: py37
    3.8: py38
    3.9: py39
    3.10: py310

[testenv:tests]
passenv = *
basepython = python3
deps =
    tests: -r requirements.txt
    ; lint:  -r requirements.txt
    ; docs:  sphinx-autobuild
commands =
    tests: python .\manage.py test --settings='fifa_manager.setting.testing' --parallel

[testenv:pylint]
passenv = *
basepython = python3
; setenv = 
    ; PYTHONPATH={toxinidir}
deps =
    pylint
    djangorestframework
commands = 
    pylint .\manager\ --disable=wrong-import-order,too-many-instance-attributes,too-few-public-methods,protected-access,no-member --ignore=migrations,admin.py,apps.py

[testenv:isort]
basepython = python3
usedevelop = false
deps = isort
changedir = {toxinidir}
commands = isort  manager --profile black --check-only --diff --skip manager/migrations
